openapi: 3.0.0
info:
  version: "1.0.0"
  title: "Stalker API"
  description: "API di Stalker di Imola Informatica sviluppato da qbteam"
  contact:
    name: "qbteam"
    url: "https://github.com/qb-team/"
    email: "qbteamswe@gmail.com"
# Server attualmente localhost
servers:
  - description: Server attualmente localhost
    url: http://localhost:8080/
tags:
  - name: organization
    description: End-points for retrieving, updating and asking for deletion of organizations.
  - name: favorite
    description: End-points for retrieving, adding and removing organizations.
  - name: place
    description: Place related endpoints.
  - name: tracking
    description: Tracking related endpoints.
  - name: movement
    description: Movement related endpoints.
  - name: access
    description: Access related endpoints.
  - name: presence
    description: Presence related endpoints.
  - name: administrator
    description: End-points for retrieving, adding, binding and unbinding administrators.
paths:
  "/organization":
    get:
      tags:
        - organization
      summary: Returns the list of all organizations.
      description: >-
        Returns the list of all organizations available in the system.
        The list can be empty. Only app users can access this end-point.
      operationId: getOrganizationList
      responses:
        "200":
          description: List of all organizations is non-empty and gets returned successfully.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Organization"
        "204":
          description: List of all organizations is empty. Nothing gets returned.
        "401":
          description: The user is not authenticated. Nothing gets returned.
        "403":
          description: Administrators cannot have access. Nothing gets returned.
        "404":
          description: List of all organizations could not be found. Nothing gets returned.
  "/organization/{organizationId}":
    get:
      tags:
        - organization
      summary: Gets the available data for a single organization.
      description: >-
        Gets the data available for a single organization. 
        Both app users and web-app admininistrators can access this end-point but, 
        app users can request information for all the organizations while web-app 
        administrators can only for the organizations they have access to.
      operationId: getOrganization
      parameters:
        - name: organizationId
          in: path
          description: ID of an organization.
          required: true
          schema:
            type: integer
            format: int64
            minimum: 1
      responses:
        "200":
          description: Organization returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "401":
          description: The user or the administrator is not authenticated. Nothing gets returned.
        "404":
          description: Organization not found. Nothing gets returned.
    put:
      tags:
        - organization
      summary: Updates one or more properties of an organization.
      description: >-
        Updates one or more properties of an organization. 
        Only web-app administrators (if they have the correct access rights) can access this end-point.
      operationId: updateOrganization
      parameters:
        - name: organizationId
          in: path
          description: ID of an organization.
          required: true
          schema:
            type: integer
            format: int64
            minimum: 1
      responses:
        "200":
          description: Organization updated successfully. The updated organization gets returned.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "403":
          description: Users cannot have access. Nothing gets returned.
        "404":
          description: Invalid organization ID supplied. Nothing gets returned.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Organization"
  "/organization/favorite/{userId}":
    get:
      tags:
        - organization
        - favorite
      summary: Gets the list of favorite organizations of a user.
      description: >-
        Gets the list of favorite organizations of a user. 
        Only app users can access this end-point.
      operationId: getFavoriteOrganizationList
      parameters:
        - name: userId
          in: path
          description: ID of the user. It must be the same of the userId of the authenticated user.
          required: true
          schema:
            type: string
      responses:
        "200":
          description: List of favorite organizations returned successfully.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Organization"
        "204":
          description: List of favorite organizations is empty. Nothing gets returned.
        "401":
          description: The user or the administrator is not authenticated. Nothing gets returned.
        "403":
          description: Administrators cannot have access. Nothing gets returned.
        "404":
          description: List of organizations could not be found. Nothing gets returned.
  "/organization/favorite/{userId}/add/{organizationId}":
    post:
      tags:
        - organization
        - favorite
      summary: Adds a new organization to the user's favorite organization list.
      description: >-
        Adds a new organization to the user's favorite organization list. 
        Only app users can access this end-point.
      operationId: addFavoriteOrganization
      parameters:
        - name: userId
          in: path
          description: ID of the user. It must be the same of the userId of the authenticated user.
          required: true
          schema:
            type: string
        - name: organizationId
          in: path
          description: ID of an organization.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "201":
          description: >-
            Organization successfully added to the list of favorite. 
            The favorite record just added (including the organization) gets returned.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Favorite"
        "400":
          description: The user already added the organization to the list of favorite organizations.
        "401":
          description: The user is not authenticated. Nothing gets returned.
        "403":
          description: Administrators cannot have access. Nothing gets returned.
        "404":
          description: The organization could not be found. Nothing gets returned.
  "/organization/favorite/{userId}/remove/{organizationId}":
    delete:
      tags:
        - organization
        - favorite
      summary: Removes the organization from the user's favorite organization list.
      description: >-
        Removes the organization from the user's favorite organization list.
        Only app users can access this end-point.
      operationId: removeFavoriteOrganization
      parameters:
        - name: userId
          in: path
          description: ID of the user. It must be the same of the userId of the authenticated user.
          required: true
          schema:
            type: string
        - name: organizationId
          in: path
          description: ID of an organization.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "205":
          description: Organization successfully removed from the list of favorites.
        "400":
          description: The organization is not part of the list of favorite organizations.
        "401":
          description: The user is not authenticated. Nothing gets returned.
        "403":
          description: Administrators cannot have access. Nothing gets returned.
        "404":
          description: The organization could not be found. Nothing gets returned.     
  "/organization/{organizationId}/administrator/create":
    post:
      tags:
        - organization
        - administrator
      summary: Creates and binds a new administrator to the organization.
      description: >-
        Creates and binds a new administrator to the current organization. 
        Only web-app administrators can access this end-point.
      operationId: createNewAdministratorToOrganization
      parameters:
        - name: organizationId
          in: path
          description: >-
            ID of an organization.
            The administrator must have at least owner permission to the organization.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "201":
          description: Administrator created and binded successfully. The permission record gets returned.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Permission"
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "403":
          description: Users or administrator with viewer or manager permission cannot have access. Nothing gets returned.
        "404":
          description: The organization could not be found. Nothing gets returned.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Administrator"
  "/organization/{organizationId}/administrator/bind/{administratorId}":
    post:
      tags:
        - organization
        - administrator
      summary: Bind an already existent administrator to the current organization.
      description: >-
        Bind an already existent administrator to the current organization.
        Only web-app admininistrators can access this end-point.
      operationId: bindAdministratorToOrganization
      parameters:
        - name: organizationId
          in: path
          description: >-
            ID of an organization.
            The administrator must have at least owner permission to the organization.
          required: true
          schema:
            type: integer
            format: int64
        - name: administratorId
          in: path
          description: ID of an administrator.
          required: true
          schema:
            type: string
      responses:
        "201":
          description: Administrator binded successfully. The permission record gets returned.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Permission"
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "403":
          description: Users or administrator with viewer or manager permission cannot have access. Nothing gets returned.
        "404":
          description: The organization or the administrator could not be found. Nothing gets returned.
  "/organization/{organizationId}/administrator/unbind/{administratorId}":
    post:
      tags:
        - organization
        - administrator
      summary: Unbind an administrator to the current organization.
      description: >-
        Unbind an administrator to the current organization.
        Only web-app admininistrators can access this end-point.
      operationId: unbindAdministratorFromOrganization
      parameters:
        - name: organizationId
          in: path
          description: >-
            ID of an organization.
            The administrator must have at least owner permission to the organization.
          required: true
          schema:
            type: integer
            format: int64
        - name: administratorId
          in: path
          description: ID of an administrator.
          required: true
          schema:
            type: string
      responses:
        "204":
          description: Administrator unbinded successfully. Nothing gets returned.
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "403":
          description: Users or administrator with viewer or manager permission cannot have access. Nothing gets returned.
        "404":
          description: The organization or the administrator could not be found. Nothing gets returned.
  "/organization/{organizationId}/administrator":
    get:
      tags:
        - organization
        - administrator
      summary: Returns the list of administrators of the current organization.
      description: >- 
        Returns the list of administrators of the current organization.
        Only web-app admininistrators can access this end-point.
      operationId: getAdministratorListOfOrganization
      parameters:
        - name: organizationId
          in: path
          description: >- #controllare
            ID of an organization.
            The administrator must have at least owner permission to the organization.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: Administrators' information returned successfully.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/AdministratorInfo"
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "403":
          description: Users or administrator with viewer or manager permission cannot have access. Nothing gets returned.
        "404":
          description: The organization could not be found. Nothing gets returned.
  "/organization/{organizationId}/requestdeletion":
    post:
      tags:
        - organization
      summary: Sends a deletion request to the system. The request will be examined by Stalker administrators.
      description: >-
        Sends a deletion request to the system. 
        The request will be examined by Stalker administrators.
        Only web-app admininistrators can access this end-point.
      operationId: requestDeletionOfOrganization
      parameters:
        - name: organizationId
          in: path
          description: >-
            ID of an organization.
            The administrator must have at least owner permission to the organization.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "204":
          description: Request sent successfully. Nothing gets returned.
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "403":
          description: Users or administrator with viewer or manager permission cannot have access. Nothing gets returned.
        "404":
          description: The organization could not be found. Nothing gets returned.
  "/organization/{organizationId}/trackingArea":
    put:
      tags:
        - organization
      summary: Updates the coordinates of the tracking area of an organization.
      description: >-
        Updates the coordinates of the tracking area of an organization.
        Only web-app admininistrators can access this end-point.
      operationId: updateTrackingArea
      parameters:
        - name: organizationId
          in: path
          description: >-
            ID of an organization.
            The administrator must have at least manager permission to the organization.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: The tracking area of the organization was updated successfully. The organization gets returned.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "400":
          description: The new tracking area does not respect the area constraints for the organization. Nothing gets returned.
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "403":
          description: Users or administrator with viewer permission cannot have access. Nothing gets returned.
        "404":
          description: The organization could not be found. Nothing gets returned.
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              required:
                - trackingArea
              properties:
                trackingArea:
                  type: string
                  description: JSON representation of a tracking area.       
  "/place":
    post:
      tags:
        - place
      summary: Creates a new place for an organization.
      description: >-
        Creates a new place for an organization.
        Only web-app admininistrators can access this end-point.
      operationId: createNewPlace
      parameters:
        - name: placeId
          in: path
          description: >-
            ID of a place.
            The admininistrator must have at least manager permission to the organization.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "201":
          description: The new place of the organization was created. The place gets returned.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Place"
        "400":
          description: The new tracking area does not respect the area constraints for the organization. Nothing gets returned.
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "403":
          description: Users or administrator with viewer permission cannot have access. Nothing gets returned.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Place"
  "/place/{placeId}":
    put:
      tags:
        - place
      summary: Updates one or more properties of a place of an organization.
      description: >-
        Updates one or more properties of a place of an organization.
        Only web-app admininistrators can access this end-point.
      operationId: updatePlace
      parameters:
        - name: placeId
          in: path
          description: ID of a place.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: Place updated successfully. The updated place gets returned.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Place"
        "400":
          description: The new tracking area does not respect the area constraints for the organization. Nothing gets returned. 
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "403":
          description: Users or administrator with viewer permission cannot have access. Nothing gets returned.
        "404":
          description: Invalid place ID supplied. Nothing gets returned.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Place"
    delete:
      tags:
        - place
      summary: Deletes a place of an organization.
      description: >-
        Deletes a place of an organization.
        Only web-app admininistrators can access this end-point.
      operationId: deletePlace
      parameters:
        - name: placeId
          in: path
          description: ID of a place.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "205":
          description: Place successfully removed from the list of favorites. Nothing gets returned.
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "403":
          description: Administrators cannot have access. Nothing gets returned.
        "404":
          description: The organization could not be found. Nothing gets returned.  
  "/movement/track/organization":
    post:
      tags:
        - movement
        - organization
      summary: Tracks the user movement inside the trackingArea of an organization.
      description: Tracks the user movement inside the trackingArea of an organization.
      operationId: trackMovementInOrganization
      responses:
        "201":
          description: Entrance movement successfully tracked. The movement with the exitToken gets returned.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrganizationMovement"
        "202":
          description: Exit movement successfully tracked. Nothing gets returned.
        "400":
          description: Exit movement was requested without the exitToken. It will not be tracked. Nothing gets returned.
        "401":
          description: The user is not authenticated. Nothing gets returned.
        "403":
          description: Administrators cannot have access. Nothing gets returned.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OrganizationMovement"
  "/movement/track/place":
    post:
      tags:
        - movement
        - place
      summary: Tracks the user movement inside the trackingArea of a place of an organization.
      description: Tracks the user movement inside the trackingArea of a place of an organization.
      operationId: trackMovementInPlace
      responses:
        "201":
          description: Entrance movement successfully tracked. The movement with the exitToken gets returned.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PlaceMovement"
        "202":
          description: Exit movement successfully tracked. Nothing gets returned.
        "400":
          description: Exit movement was requested without the exitToken. It will not be tracked. Nothing gets returned.
        "401":
          description: The user is not authenticated. Nothing gets returned.
        "403":
          description: Administrators cannot have access. Nothing gets returned.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PlaceMovement"
  "/access/place/{placeId}/authenticated/{userIds}":
    get:
      tags:
        - access
        - place
      summary: Returns all the authenticated accesses in a place registered of one or more users (userIds are separated by commas).
      description: >-
        Returns all the authenticated accesses in a place registered of one or more users (userIds are separated by commas) that are fully registered.
        Fully registered means that there are both the entrance and the exit timestamp.
        Both app users and web-app admininistrators can access this end-point.
      operationId: getAuthenticatedAccessListInPlace
      parameters:
        - name: userIds
          in: path
          description: >-
            One or more userIds.
            If it is called by the app user, the userIds parameter can only consist in one identifier.
            Otherwise it can be more than one identifier.
          required: true
          explode: true
          schema:
            type: array
            items:
              type: integer
              format: int64
        - name: placeId
          in: path
          description: ID of a place.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: List of authenticated accesses in a place gets returned successfully.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/PlaceAccess"
        "204":
          description: List of authenticated accesses in a place were not found. Nothing gets returned.
        "401":
          description: The administrator or the user is not authenticated. Nothing gets returned.
        "404":
          description: The place could not be found. Nothing gets returned.
  "/access/organization/{organizationId}/authenticated/{userIds}":
    get:
      tags:
        - access
        - organization
      summary: Returns all the authenticated accesses in an organization registered of one or more users (userIds are separated by commas).
      description: >-
        Returns all the authenticated accesses in an organization registered of one or more users (userIds are separated by commas) that are fully registered.
        Fully registered means that there are both the entrance and the exit timestamp.
        Both app users and web-app admininistrators can access this end-point.
      operationId: getAuthenticatedAccessListInOrganization
      parameters:
        - name: userIds
          in: path
          description: >-
            One or more userIds.
            If it is called by the app user, the userIds parameter can only consist in one identifier.
            Otherwise it can be more than one identifier.
          required: true
          explode: true
          schema:
            type: array
            items:
              type: integer
              format: int64
        - name: organizationId
          in: path
          description: ID of an organization
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: List of authenticated accesses in an organization gets returned successfully.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/OrganizationAccess"
        "204":
          description: List of authenticated accesses in an organization were not found. Nothing gets returned.
        "401":
          description: The administrator or the user is not authenticated. Nothing gets returned.
        "404":
          description: The organization could not be found. Nothing gets returned.
  "/presence/organization/{organizationId}":
    get:
      tags:
        - presence
        - organization
      summary: Gets the list of people currently inside the organization's trackingArea.
      description: >-
        Gets the list of people currently inside the organization's trackingArea.
        The organization is required to track people with trackingMode: authenticated.
        Only web-app admininistrators can access this end-point.
      operationId: getOrganizationPresenceList
      parameters:
        - name: organizationId
          in: path
          description: ID of an organization.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: Organization presence list returned successfully.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/OrganizationAccess"
        "204":
          description: There is currently nobody inside the organization's trackingArea. Nothing gets returned.
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "404":
          description: The organization could not be found. Nothing gets returned.
  "/presence/organization/{organizationId}/counter":
    get:
      tags:
        - presence
        - organization
      summary: Gets the number of people currently inside the organization's trackingArea.
      description: >-
        Gets the number of people currently inside the organization's trackingArea.
        Only web-app admininistrators can access this end-point.
      operationId: getOrganizationPresenceCounter
      parameters:
        - name: organizationId
          in: path
          description: ID of an organization.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: Organization presence counter returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrganizationPresenceCounter"
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "404":
          description: The organization could not be found. Nothing gets returned.
  "/presence/place/{placeId}":
    get:
      tags:
        - presence
        - place
      summary: Gets the list of people currently inside the place's trackingArea.
      description: >-
        Gets the list of people currently inside the place's trackingArea.
        The place is required to track people with trackingMode: authenticated.
        Only web-app admininistrators can access this end-point.
      operationId: getPlacePresenceList
      parameters:
        - name: placeId
          in: path
          description: ID of a place.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: Place presence list returned successfully.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/PlaceAccess"
        "204":
          description: There is currently nobody inside the place's trackingArea. Nothing gets returned.
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "404":
          description: The place could not be found. Nothing gets returned.
  "/presence/place/{placeId}/counter":
    get:
      tags:
        - presence
        - place
      summary: Gets the number of people currently inside the place's trackingArea.
      description: >-
        Gets the number of people currently inside the place's trackingArea.
        Only web-app admininistrators can access this end-point.
      operationId: getPlacePresenceCounter
      parameters:
        - name: placeId
          in: path
          description: ID of a place.
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: Place presence counter returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PlacePresenceCounter"
        "401":
          description: The administrator is not authenticated. Nothing gets returned.
        "404":
          description: The place could not be found. Nothing gets returned.
components:
  schemas:
    Organization:
      type: object
      description: >-
        Subject interested in tracking people's presence inside its own places, in either an anonymous or authenticated way.
      required:
        - id
        - name
        - street
        - number
        - postcode
        - city
        - country
        - creationDate
        - modifyDate
        - trackingArea
        - trackingMode
      properties:
        id:
          type: integer
          format: int64
          description: Unique identifier for an organization.
        name:
          type: string
          description: Name of the organization.
        description:
          type: string
          description: Small description of what the organization does.
        image:
          type: string
          description: Image/logo for the organization which gets shown on the application.
        street:
          type: string
          description: The street where the organization is located.
        number:
          type: string
          description: The number in the street where the organization is located.
        postCode:
          type: integer
          format: string
          description: The postcode where the organization is located.
        city:
          type: string
          description: The city where the organization is located.
        country:
          type: string
          description: The country where the organization is located.
        authenticationServerURL:
          type: string
          description: >-
            URL or IP address of the authentication server of the organization.
            If it's required a specific port or protocol it must be specified.
            Needed only if trackingMethod is set to authenticated.
        creationDate:
          type: string
          format: date-time
          description: When the organization was added to the system.
        lastChangeDate:
          type: string
          format: date-time
          description: When the organization parameters were last changed.
        trackingArea:
          type: string
          description: >-
            Area subjected to movement tracking of people.
            It is a collection of (longitude, latitude) pairs consisting in a polygon.
            The string is expressed in JSON format.
        trackingMode:
          type: string
          description: How an user who added to its favorites the organization can be tracked inside the organization's trackingArea and its places.
          enum:
            - authenticated
            - anonymous
    Place:
      type: object
      description: Area of an organization subjected to tracking.
      required:
        - id
        - organizationId
        - trackingArea
      properties:
        id:
          type: integer
          format: int64
          description: Unique identifier for a place of an organization.
        name:
          type: string
          description: Name describing the place. If not set by user it gets automatically filled.
        organizationId:
          type: integer
          format: int64
          description: Unique identifier of the organization the place is part of.
        trackingArea:
          type: string
          description: >-
            rea subjected to movement tracking of people.
            It is a collection of (longitude, latitude) pairs consisting in a polygon.
            The string is expressed in JSON format.     
    User:
      type: object
      required:
        - userId
      properties:
        userId:
          type: string
          description: Authentication service's user unique identifier.
        orgAuthServerId:
          type: string
          description: User unique identifier from the authentication server of the organization.
    Administrator:
      type: object
      required:
        - administratorId
      properties:
        administratorId:
          type: string
          description: Authentication service's administrator unique identifier.
        orgAuthServerId:
          type: string
          description: User unique identifier from the authentication server of the organization.
    AdministratorInfo:
      type: object
      required:
        - mail
        - permission
      properties:
        mail:
          type: string
          format: email
          description: Mail of the administrator.
        permission:
          $ref: "#/components/schemas/Permission"
    UserInfo:
      type: object
      required:
        - name
        - surname
        - mail
      properties:
        name:
          type: string
          description: Name of the user (if available in the authentication server of the organization).
        surname:
          type: string
          description: Surname of the user (if available in the authentication server of the organization).
        mail:
          type: string
          format: email
          description: Mail address of the user.
    Permission:
      type: object
      description: What can or cannot do an organization's administrator.
      required:
        - administratorId
        - organizationId
        - permission
      properties:
        administratorId:
          type: string
          description: Authentication service's administrator unique identifier.
        organizationId:
          type: integer
          format: int64
          description: Unique identifier of the organization the administrator is part of.
        permission:
          type: integer
          format: int32
          minimum: 1
          maximum: 3
          description: >-
            What can or cannot do an organization's administrator.
            The permission levels are:
            - Owner: 3 (higher level)
            - Manager: 2
            - Viewer: 1 (lowest level)
    Favorite:
      type: object
      description: >-
        Link between the user and the organization: only the organization which users set to be their favorite can track their movements.
      required:
        - userId
        - organizationId
        - creationDate
      properties:
        userId:
          type: string
          description: Authentication service's user unique identifier.
        organizationId:
          type: integer
          format: int64
          description: Unique identifier of the organization the user sets as favorite.
        creationDate:
          type: string
          format: date-time
          description: When the favorite was added by the user.
    PlaceAccess:
      type: object
      description: Access to a place of an organization.
      required:
        - id
        - entranceTimestamp
        - exitTimestamp
        - placeId
      properties:
        id:
          type: integer
          format: int64
        entranceTimestamp:
          type: string
          format: date-time
          description: Date and time of the moment in which the user entered the place.
        exitTimestamp:
          type: string
          format: date-time
          description: Date and time of the moment in which the user left the place.
        placeId:
          type: integer
          format: int64
          description: Unique identifier of the place in which the user had access.
        orgAuthServerId:
          type: string
          description: User unique identifier from the authentication server of the organization.
    OrganizationAccess:
      type: object
      description: Access to an organization.
      required:
        - id
        - entranceTimestamp
        - exitTimestamp
        - organizationId
      properties:
        id:
          type: integer
          format: int64
        entranceTimestamp:
          type: string
          format: date-time
          description: Date and time of the moment in which the user entered the place.
        exitTimestamp:
          type: string
          format: date-time
          description: Date and time of the moment in which the user left the place.
        organizationId:
          type: integer
          format: int64
          description: Unique identifier of the organization in which the user had access.
        orgAuthServerId:
          type: string
          description: User unique identifier from the authentication server of the organization.
    OrganizationPresenceCounter:
      type: object
      description: Number of people currently inside the organization's trackingArea.
      required:
        - organizationId
        - counter
      properties:
        organizationId:
          type: integer
          format: int64
          description: Unique identifier of the organization.
        counter:
          type: integer
          format: int32
          description: Number of people currently inside the organization's trackingArea.
    PlacePresenceCounter:
      type: object
      description: Number of people currently inside a place of an organization.
      required:
        - placeId
        - counter
      properties:
        placeId:
          type: integer
          format: int64
          description: Unique identifier of the place.
        counter:
          type: integer
          format: int32     
          description: Number of people currently inside a place of an organization.
    PlaceMovement:
      type: object
      description: Movement in a place of an organization.
      required:
        - timestamp
        - movementType
        - placeId
      properties:
        exitToken:
          type: string
          description: >-
            Token generated by the server when the user entered in the organization.
            It is required only to track an exit movement.
            If this property is not empty in an entrance movement it will not be considered.
        timestamp:
          type: string
          format: date-time
          description: Date and time of the moment in which the user entered the place.
        movementType:
          type: integer
          format: int32
          description: >-
            Type of movement. It can be:
            - Entrance: 1
            - Exit: -1
        placeId:
          type: integer
          format: int64
          description: Unique identifier of the place in which the user had access.
        orgAuthServerId:
          type: string
          description: User unique identifier from the authentication server of the organization.
    OrganizationMovement:
      type: object
      description: Movement in an organization.
      required:
        - timestamp
        - movementType
        - organizationId
      properties:
        exitToken:
          type: string
          description: >-
            Token generated by the server when the user entered in the organization.
            It is required only to track an exit movement.
            If this property is not empty in an entrance movement it will not be considered.
        timestamp:
          type: string
          format: date-time
          description: Date and time of the moment in which the user entered the place.
        movementType:
          type: integer
          format: int32
          description: >-
            Type of movement. It can be:
            - Entrance: 1
            - Exit: -1
        organizationId:
          type: integer
          format: int64
          description: Unique identifier of the organization in which the user had access.
        orgAuthServerId:
          type: string
          description: User unique identifier from the authentication server of the organization.